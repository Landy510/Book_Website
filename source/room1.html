<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name='description' content='FANCY MARBLE讓您舒緩您的身心靈'/>
  <meta property="og:title" content="FANCY MARBLE" />
  <meta property="og:description" content="FANCY MARBLE讓您舒緩您的身心靈">
  <meta property="og:type" content="website"/>
  <meta property="og:image" content="https://upload.cc/i1/2021/04/10/CeM1LK.jpg"/>
  <link rel="shortcut icon" href="./images/house.svg">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <link rel="stylesheet" type="text/css" href="stylesheets/all.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <title>FANCY MARBLE</title>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-light pt-0 navbar-layer">
    <a class="navbar-brand bg-primary px-2 text-light" href="./index.html">FANCY MARBLE</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item active border border-light language-option rounded bg-cover nav-language">
          <a class="nav-link text-center text-light" href="#">繁中</a>
        </li>
      </ul>
    </div>
  </nav>
  <!--客製化內容開始--> 
  <div class="container-fluid">
    <div class="row">
        <div class="col-md-7 pr-0 pb-1 pb-md-0 pr-md-1 pl-0">
          <a class="example-image-link" href="./images/room1/photo-1515511856280-7b23f68d2996.jpeg" data-lightbox="example-1">
            <img class="example-image w-100 big_lightboxPic" src="./images/room1/photo-1515511856280-7b23f68d2996.jpeg" alt="image-1"/>
          </a>
        </div>
        <div class="col-md-5 px-0">
          <div class="small_lightboxPic pb-1">
            <a class="example-image-link" href="./images/room1/photo-1526880792616-4217886b9dc2.jpeg" data-lightbox="example-1">
              <div class="h-100 bg-cover" style="background-position: top; background-image: url(./images/room1/photo-2.jpg);"></div>
            </a>
          </div>
          <div class="small_lightboxPic">
            <a class="example-image-link" href="./images/room1/1551776235-dde6d482980b.jpg" data-lightbox="example-1">
              <div class="h-100 bg-cover" style="background-image: url(./images/room1/photo-3.jpg);"></div>
            </a>
          </div>
        </div>
      
    </div>
  </div>
  <div class="container">
    <div class="row">
      <div class="col-lg-7 pt-5">
        <div class="row">
          <div class="col-12 col-lg-8">
            <p class="h1">Single room 單人房</p>
            <div class="d-block d-lg-none">
              <p class="h2">$1380 <span>平日(一~四)</span></p>
              <p class="text-muted">$1500 <span>假日(六、日)</span></p>
            </div>
            <section class="mb-5">
              <div class="room-title mt-5 medium-text">客房資訊</div>
              <p class="mt-4 medium-text medium-font-weight">描述</p>
              <p class="text-fifth">
                Single Room is only reserved for one guest. There is a bedroom with a single size bed and a private bathroom. Everything you need prepared for you: sheets and blankets, towels, soap and shampoo, hairdryer are provided. In the room there is AC and of course WiFi.
              </p>
            </section>
            <section class="mb-5">
              <p class="mb-1 medium-text medium-font-weight">入住資訊</p>
              <ul class="list-group">
                <li class="list-group-item p-0 border-0 text-fifth">Check-in 15:00 ~ 19:00</li>
                <li class="list-group-item p-0 border-0 text-fifth">Check-out 10:00 前</li>
                <li class="list-group-item p-0 border-0 text-fifth">人數限制 1人</li>
                <li class="list-group-item p-0 border-0 text-fifth">客房大小 18平方公尺</li>
              </ul>
            </section>
            <section>
              <div class="mt-4">
                <p class="medium-text medium-font-weight">客房設備</p>
                <div class="row mx-0 py-3 bg-third">
                  <div class="col-6 d-flex align-items-top py-3">
                    <div>
                      <img src="./images/icons8-wi-fi-96.png" alt="Wifi服務" class="mr-2"> 
                    </div>
                    <span>Wifi</span>
                  </div>
                  <div class="col-6 d-flex align-items-top py-3">
                    <div>
                      <img src="./images/icons8-food-service-90.png" alt="客房服務" class="mr-2"> 
                    </div>
                    <span class="text-muted">Room Service</span>
                  </div>
                  <div class="col-6 d-flex align-items-top py-3">
                    <img src="./images/icons8-food-90.png" alt="早餐" class="mr-2"> 
                    <span class="text-muted">早餐</span>
                  </div>
                  <div class="col-6 d-flex align-items-top py-3">
                    <img src="./images/icons8-fridge-100.png" alt="冰箱" class="mr-2"> 
                    <span class="text-muted">冰箱</span>
                  </div>
                  <div class="col-12">
                    <div class="row mx-0 room_device_info">
                      <div class="col-6 d-flex align-items-top py-3 px-0">
                        <div>
                          <i class="fa fa-glass mr-2 text-muted"></i>
                        </div>
                        <span class="text-muted">Mini Bar</span>
                      </div>
                      <div class="col-6 d-flex align-items-top py-3">
                        <div>
                          <i class="fa fa-paw mr-2"></i>
                        </div>
                        <span>pets</span>
                      </div>
                      <div class="col-6 d-flex align-items-top py-3 px-0">
                        <div>
                          <i class="fa fa-fire text-muted mr-2"></i>
                        </div>
                        <span class="text-muted">cooking</span>
                      </div>
                      <div class="col-6 d-flex align-items-top py-3">
                        <div>
                          <i class="fa fa-bath mr-2"></i>
                        </div>
                        <span>bath</span>
                      </div>
                    </div>
                  </div>
                  <div class="col-12">
                    <button class="btn btn-outline-primary show_room_info">顯示全部設備與服務</button>
                  </div>
                </div>
              </div>
            </section>
          </div>
          <div class="col-lg-4 d-none d-lg-block">
            <div class="price d-flex flex-column">
              <div class="h1 text-right">
                <span class="room_price_info">＄1380</span>
              </div>
              <div class="text-right">
                <span class="room_price_info text-muted">平日(一~四)</span>
              </div>
              <div class="text-right">
                <span class="room_price_info">＄1500</span>
              </div>
              <div class="text-right"> 
                <span class="room_price_info text-muted">假日(六、日)</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-5 pt-5">
        <form class="p-3 reservation_form">
          <label>日期</label>
          <div class="form-row border-bottom mb-3">
            <div class="form-group col-md-5 w-100 d-flex align-items-center mb-1">
              <input class="flatpickr flatpickr-input border-0 w-100" type="text" placeholder="入住" readonly="readonly" id="from">
            </div>
            <div class="form-group col-md-2 d-flex align-items-center justify-content-center mb-1">
              <i class="fa fa-long-arrow-right"></i>
            </div>
            <div class="form-group col-md-5 w-100 d-flex align-items-center mb-1">
              <input class="flatpickr flatpickr-input border-0 w-100" type="text" placeholder="退房" readonly="readonly" id="to">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group col-12">
              <label for="validationCustom04">房客</label>
              <select class="form-control border-right-0 border-left-0 border-top-0 rounded-0" id="validationCustom04" required>
                <option selected value="1">1位</option>
                <option value="2">2位</option>
                <option value="3">3位</option>
                <option value="4">4位</option>
              </select>
            </div>
          </div>
          <div class="booking-info"></div>
          <button type="button" class="btn btn-primary btn-lg w-100 text-light reserve-btn">預約</button>
          <p class="text-center text-fourth mt-3">您暫時不會被收款</p>
        </form>
      </div>
    </div>
  </div>
  <div class="modal fade" id="bookModal" tabindex="-1" role="dialog" aria-labelledby="bookModal" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header bg-primary">
          <h5 class="modal-title font-weight-bold" id="bookModal">日期錯誤</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body h5">
          <span class="font-weight-bold">入住日期</span>不得大於<span class="font-weight-bold">退房日期</span>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="bookDetailModal" tabindex="-1" role="dialog" aria-labelledby="bookDetailModal" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content rounded-0">
        <div class="modal-header border-bottom-0 pb-0 px-5">
          <h5 class="modal-title font-weight-bold h3" id="bookDetailModal">預定資料</h5>
          <button type="button" class="close d-none" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body px-5">
          <div class="bg-fifth">
            <p>日期</p>
          </div>
        </div>
        <div class="reserve-footer"></div>
      </div>
    </div>
  </div>
  <!--客製化內容結束--> 
  <footer>
    <div class="container-fluid bg-third mt-5 py-4">
      <div class="container">
        <div class="row">
          <div class="col-lg-11">
            <ul class="list-unstyled d-flex mb-0 flex-column flex-lg-row">
              <li class="d-flex align-items-center flex-column flex-sm-row footer-li-layout">
                <i class="fa fa-phone icon-size"></i>
                <span class="ml-2 mt-0 footer-info-font">02 - 12345678</span>
              </li>
              <li class="d-flex align-items-center flex-column flex-sm-row footer-li-layout">
                <i class="fa fa-envelope icon-size"></i>
                <span class="ml-2 mt-0 footer-info-font">fancymarble@hotel.com</span>
              </li>
              <li class="d-flex align-items-center flex-column flex-sm-row">
                <i class="fa fa-home icon-size"></i>
                <span class="ml-2 mt-0 footer-info-font">台北市沒這區沒這路111號</span>
              </li>
            </ul>
          </div>
          <div class="col-lg-1">
            <ul class="list-unstyled d-flex justify-content-center justify-content-sm-start justify-content-lg-end mb-0">
              <li class="mr-2">
                <i class="fa fa-facebook-official icon-size"></i>
              </li>
              <li>
                <i class="fa fa-instagram icon-size"></i>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="./javascript/lightbox.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</body>
<script>
  flatpickr("#from", {
    disableMobile: true
  });
  flatpickr("#to", {
    disableMobile: true
  });
  let holidays = 0
  let workingdays = 0
  function calDate (from, to) {
    holidays = 0
    workingdays = 0
    from = new Date(from)
    to = new Date(to)
    let Dayperiod = Math.abs((from-to))/(1000*60*60*24)
    if(Dayperiod > 90) {
      let el = document.querySelector('.booking-info')
      el.innerHTML = `<p class="text-danger">* 不能預訂超過90天日期</p>`
      return
    }
    while (from < to) {
      let day = from.getDay();
      if ((day === 6) || (day === 0)){
        holidays++;          
      }
      else {
        workingdays++;
      }
      from.setDate(from.getDate() + 1);
    }

    let el = document.querySelector('.booking-info')
    el.innerHTML = `<p class="d-flex">
                    <span>平日 x ${workingdays}晚</span> 
                    <span class="ml-auto">每晚$1380</span>
                    </p>
                    <p class="d-flex border-bottom pb-1">
                    <span>假日 x ${holidays}晚</span> 
                    <span class="ml-auto">每晚$1500</span>
                    </p>
                    <p class="d-flex">
                    <span>總計</span> 
                    <span class="ml-auto h3 text-primary">$ ${workingdays*1380 + holidays*1500}</span>
                    </p>
                    `
  }
  $(document).ready(function () {
    let reserve_btn = document.querySelector('.reserve-btn')
    let reserve_content = document.querySelector('#bookDetailModal .modal-body')
    let reserve_footer = document.querySelector('.reserve-footer')
    let booking_people = document.querySelector('#validationCustom04')
    let start = ''
    let end = ''
    let tempstart = ''
    const today = new Date();
    $('#from').on('input', function (ev) {
      let el = document.querySelector('.booking-info')
      start = ev.target.value
      tempstart = new Date(start)
      if(tempstart < today) {
        el.innerHTML = `<p class="text-danger">* 不得選擇過去日期</p>`
        return
      }
      el.innerHTML = ``
      if (end !== '' && start > end) {
        $('#bookModal').modal('show')
        return
      } else {
        if (end === '') return
        calDate(start, end)
      }
    })
    $('#to').on('blur', function (ev) {
      end = ev.target.value
      if (end !== '' && start > end) {
        $('#bookModal').modal('show')
        return
      } else if (end === '') {
        return
      } else if (start === '') {
        return
      } else {
        calDate(start, end)
      }
    })
    reserve_btn.addEventListener('click', function () { 
      let booking_info = document.querySelector('.booking-info')
      let from_el = document.querySelector('#from')
      let to_el = document.querySelector('#to')
      if(from_el.value === '' || to_el.value === '') {
        booking_info.innerHTML = '<p class="text-danger">* 請填寫入住日期 或 退房日期</p>'
        return
      } else if (new Date(from_el.value) < today) {
        booking_info.innerHTML = '<p class="text-danger">* 不得選擇過去日期</p>'
        return
      } else {
        $('#bookDetailModal').modal('show')
      }
    })
    $('#bookDetailModal').on('shown.bs.modal', function (ev) {
      reserve_content.innerHTML= `
      <div class="bg-third p-3" style="position: relative;">
        <div class="d-flex justify-content-center align-items-center flex-column reserve-cover" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-color:rgba(250, 221, 2, 0.8); opacity:0; transition:all .5s;">
          <i class="fa fa-check-circle-o" style="font-size:140px; color:white;"></i>
          <h2 class="text-light font-weight-bold mt-3">預定成功</h2>
        </div>

      <div class="small-text text-fifth">日期</div>
      <div>
        <span class="medium-text ml-1">${start}</span>
        <i class="fa fa-long-arrow-right mx-2"></i>
        <span class="medium-text">${end}</span>
      </div>
      <div class="d-flex mt-3">
        <div>
          <p class="small-text text-fifth mb-0">房型</p>
          <p class="medium-text ml-1">單人房</p>
        </div> 
        <div class="ml-4 ml-sm-8">
          <p class="small-text text-fifth mb-0">房客</p>
          <p class="medium-text ml-1">${booking_people.value}位</p>
        </div>
      </div>
      <div class="mt-3" style="border-bottom: 1px solid #707070;">
        <div>
          <p class="small-text text-fifth mb-0">價錢</p>
          <p class="small-text ml-1 d-flex mb-1">
            <span>$1380 x ${workingdays} 晚</span>
            <span class="ml-auto">$1380</span> 
          </p>
          <p class="small-text ml-1 d-flex">
            <span>$1500 x ${holidays} 晚</span>
            <span class="ml-auto">$1500</span> 
          </p>
        </div>
      </div>
      <div class="mt-2">
        <p class="small-text d-flex">
          <span>總金額</span>
          <span class="ml-auto h3 text-primary">$ ${workingdays*1380 + holidays*1500}</span>
        </p>
      </div>
      </div>
      `
      reserve_footer.innerHTML = `
        <div class="input-group px-5">
          <div class="input-group-prepend rounded-0">
            <span class="input-group-text rounded-0 bg-transparent border-top-0 border-left-0 border-right-0 font-weight-bold" id="basic-addon1">姓名</span>
          </div>
          <input type="text" class="form-control rounded-0 text-right border-top-0 border-left-0 border-right-0 medium-text reservation_name" placeholder="請輸入姓名" aria-label="Username" aria-describedby="basic-addon1">
        </div>
        <div class="input-group mt-4 px-5">
          <div class="input-group-prepend rounded-0">
            <span class="input-group-text rounded-0 bg-transparent border-top-0 border-left-0 border-right-0 font-weight-bold" id="basic-addon1">電話</span>
          </div>
          <input type="tel" class="form-control rounded-0 text-right border-top-0 border-left-0 border-right-0 medium-text reservation_tel" placeholder="請輸入電話" aria-label="Username" aria-describedby="basic-addon1">
        </div>
        <div class="reservation_advice mt-4 px-5"></div>
        <div class="mt-6 d-flex justify-content-between px-5">
          <div class="w-40">
            <button class="btn btn-lg btn-third w-40 rounded-0 w-100" data-dismiss="modal">取消</button>
          </div>
          <div class="w-40">
            <button class="btn btn-lg btn-primary rounded-0 w-100 text-light reserve-content-btn">預定</button>
            <p class="text-center mt-1">您暫時不會被收款</p>
          </div>
        </div>
        `
        $('.reserve-content-btn').on('click', function () {
          let reservation_name = document.querySelector('.reservation_name')
          let reservation_tel = document.querySelector('.reservation_tel')
          let reservation_advice = document.querySelector('.reservation_advice')
          if(reservation_name.value === '' || reservation_tel.value === '') {
            reservation_advice.innerHTML = '<p class="text-danger pb-0">請輸入姓名 或 電話</p>'
            return
          } 
          $('.reserve-cover').css('opacity', 1)
          reserve_footer.innerHTML = `
            <p class="small-b-text text-primary text-right font-weight-bold px-5">訂單詳情</p>
            <div class="d-flex justify-content-between px-5">
              <span class="small-b-text">訂單標號</span>
              <span class="text-primary medium-text">2019081234</span>
            </div>
            <div class="d-flex justify-content-between px-5 my-4">
              <span class="small-b-text">付款期限</span>
              <span class="text-primary medium-text">2019-08-14</span>
            </div>
            <div class="modal-footer px-5 d-flex justify-content-between">
              <div class="w-40">
                <button class="btn btn-lg btn-third w-40 rounded-0 w-100" data-dismiss="modal">暫不付款</button>
              </div>
              <div class="w-40">
                <button class="btn btn-lg btn-primary rounded-0 w-100 text-light reserve-content-btn" data-dismiss="modal">付款去</button>
              </div>
            </div>
          `
        });
    })
    $('.show_room_info').click(function () {
      if($('.room_device_info').css('display') === 'none') {
        $('.show_room_info').css('background-color', '#FADD02')
        $('.show_room_info').text('關閉顯示')
        $('.room_device_info').css('display', 'flex')
      } else {
        $('.show_room_info').css('background-color', 'transparent')
        $('.show_room_info').text('顯示全部設備與服務')
        $('.room_device_info').css('display', 'none')
      }
    })
    $('.language-option a').click(function (ev) {
      ev.preventDefault()
      if(ev.target.textContent === '繁中') {
        ev.target.textContent = '英語'
        $('.language-option a').parent().css('background-image', "url(https://i.postimg.cc/7ZGQX3PD/union-jack-1027898-640.jpg)")
      } else {
        ev.target.textContent = '繁中'
        $('.language-option a').parent().css('background-image', "url(https://upload.cc/i1/2021/03/31/qeEHrg.png)")
      }
    })
    window.addEventListener('scroll', function () {
      const scrollVal = window.pageYOffset
      if( scrollVal > 20 ) {
        $('.navbar').addClass('navscroll')
      } else {
        $('.navbar').removeClass('navscroll')
      }
    })
  });
</script>
</html>